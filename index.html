<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>thingies</title><meta name="description" content="Documentation for thingies"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">thingies</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h2>thingies</h2></div><div class="tsd-panel tsd-typography"><a id="md:thingies" class="tsd-anchor"></a><h1><a href="#md:thingies">thingies</a></h1><p>Useful TypeScript utilities.</p>
<ul>
<li><a href="https://streamich.github.io/thingies"><strong>Code reference</strong></a>.</li>
<li><a href="https://streamich.github.io/thingies/coverage/lcov-report"><strong>Test coverage</strong></a>.</li>
</ul>
<a id="md:menu" class="tsd-anchor"></a><h2><a href="#md:menu">Menu</a></h2><ul>
<li><code>base64</code> &mdash; Base64 encoding end decoding functions for Node.js.</li>
</ul>
<hr>
<ul>
<li><code>Cache</code> &mdash; implementation of local memory cache for database records. Can cache
retrieved database records for few dozen seconds and has garbage collection logic
which clears the memory of old items after some time.</li>
</ul>
<hr>
<ul>
<li><code>Defer</code> &mdash; an inverted <code>Promise</code>, an object which allows you to imperatively
control the behavior of a <code>Promise</code>.</li>
</ul>
<hr>
<ul>
<li><code>hash</code> &mdash; a fast and simple utility, which hashes a string to an integer. Useful
for generating a shard index of a record based on its ID.</li>
</ul>
<hr>
<ul>
<li><code>LruMap</code> &mdash; tiny and fast <em>Least Recently Used Cache</em> implemented on top of the <code>Map</code> class.
The default limit is around 1 billion items (2^30 - 1).</li>
</ul>
<hr>
<ul>
<li><code>LruTtlMap</code> &mdash; tiny and fast <em>Least Recently Used Cache</em> with expiration timestamp
stored for each entry implemented on top of the <code>LruMap</code> class.</li>
</ul>
<hr>
<ul>
<li><code>normalizeEmail</code> &mdash; normalizes email by stripping out <code>.</code> and <code>+</code> characters and
removing everything after the <code>+</code> character and lower-casing the e-mail. Useful for
getting an e-mail into a common form when throttling requests by e-mail.</li>
</ul>
<hr>
<ul>
<li><code>of</code> &mdash; returns result of a <code>Promise</code> as a 3-tuple <code>[value, error, isError]</code>.</li>
</ul>
<hr>
<ul>
<li><code>promiseMap</code> &mdash; maps a list of values to an async function and waits until
all results complete execution.</li>
</ul>
<hr>
<ul>
<li><code>randomStr</code> &mdash; generates a random string of given size. Alphabet for character
picking can be provided. Useful for generating random database record IDs.</li>
</ul>
<hr>
<ul>
<li><code>TimedQueue</code> &mdash; a queue which can be flushed manually, or which flushes
automatically when the number of queued items reaches a threshold or when a timeout
expires since the first item was added to the queue. Useful for batching multiple
messages or requests for bulk processing.</li>
</ul>
<hr>
<ul>
<li><code>TimedState</code> &mdash; works similar to <code>TimedQueue</code>, but instead of keeping track of
all items pushed, it invokes a reducer to update the state with the information from
the last pushed item.</li>
</ul>
<hr>
<ul>
<li><code>tick</code> &mdash; returns a <code>Promise</code> which resolves after a given number of milliseconds,
useful for releasing the event loop for a short period of time, <code>await tick(5)</code>.</li>
</ul>
<hr>
<ul>
<li><code>until</code> &mdash; waits for some condition to become true <code>await until(() =&gt; condition)</code>,
useful when waiting for some asynchronous task to happen in a test.</li>
</ul>
<hr>
<ul>
<li><code>concurrency</code> &mdash; limits the number of concurrent executions of asynchronous
code. <code>concurrencyDecorator</code> limits the number of concurrent executions of a
class method.</li>
</ul>
<hr>
<ul>
<li><p><code>codeMutex</code> &mdash; a mutex which can be used to synchronize code execution. Code
wrapped by this mutex will execute only one at a time, for all parallel calls to
the same mutex.</p>
</li>
<li><p><code>@mutex</code> and <code>mutex()</code> &mdash; same as <code>codeMutex</code>, but can be used as a decorator
or a higher order function.</p>
</li>
</ul>
<hr>
<ul>
<li><code>once</code> &mdash; a class method decorator, which limits method execution to once
per instance. Returns the result of the first execution for all subsequent calls.</li>
</ul>
<hr>
<ul>
<li><code>loadCss</code> &mdash; loads a CSS file into the DOM, given a URL. Does nothing on the
server.</li>
</ul>
<hr>
<ul>
<li><code>dataUri</code> &mdash; converts a string to a data URI.</li>
</ul>
<hr>
<ul>
<li><code>FanOut</code> &mdash; a class which allows to fan out a single event to multiple
listeners. Useful for implementing event emitters. In just 12 lines of code.</li>
</ul>
<hr>
<ul>
<li><code>createRace</code> &mdash; constructs a &quot;race&quot; function, which takes a function as
a single argument, the function is executed immediately only if no other
function is currently executing. If another function is currently executing,
the current function is discarded.</li>
</ul>
<hr>
<ul>
<li><code>xorShift32</code> &mdash; generates random 32-bit integers using the very fast xorshift
algorithm. <code>makeXorShift32(seed)</code> returns a function which can be used to generate
random numbers.</li>
</ul>
<hr>
<ul>
<li><code>Locks</code> &mdash; a lock manager, which allows to acquire an exclusive lock in
browser across multiple tabs. Acquires a lock by writing to <code>localStorage</code> for
a specific key for a specified duration.</li>
</ul>
<hr>
<ul>
<li><code>hasKeys</code> &mdash; returns <code>true</code> if an object has at lest on key.</li>
</ul>
<hr>
<ul>
<li><code>timeout</code> &mdash; waits for async code to complete within a given time frame,
otherwise throws an error.</li>
</ul>
<a id="md:license" class="tsd-anchor"></a><h2><a href="#md:license">License</a></h2><p><a href="LICENSE">MIT Â© Vadim Dalecky</a>.</p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-index-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><h4 class="uppercase">Member Visibility</h4><form><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></form></div><div class="tsd-theme-toggle"><h4 class="uppercase">Theme</h4><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-index-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:thingies"><span>thingies</span></a><ul><li><a href="#md:menu"><span>Menu</span></a></li><li><a href="#md:license"><span>License</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html" class="current"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="assets/icons.svg#icon-1"></use></svg><span>thingies</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base="."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>